**必ず日本語で回答してください。**

# CLAUDE.md

このファイルは、このリポジトリでコードを扱う際の Claude Code (claude.ai/code) へのガイダンスを提供します。

## プロジェクト概要

これは「Google カレンダーグループ」という名前の Chrome 拡張機能プロジェクトです。この拡張機能は、事前に定義されたグループに基づいて特定のカレンダーを有効/無効にすることで、Google Calendar 内の異なるカレンダーグループ間を素早く切り替えることを可能にします。

## プロジェクトアーキテクチャ

### 目的

- Google Calendar で複数のカレンダーを手動で切り替える問題を解決
- 対象ユーザー: プロジェクトマネージャーなど、複数人のスケジュールを管理する人
- 主要機能: ワンクリックでカレンダーグループを素早く切り替え

### 主要機能

1. **カレンダーグループ切り替え**: コンテキストメニューを通じて事前定義されたカレンダーグループ間を切り替え
2. **グループ作成**: 現在選択されているカレンダーから新しいグループを作成
3. **グループ管理**: 設定ページを通じて既存のグループを編集
4. **インポート/エクスポート**: グループ設定のバックアップと復元

### 技術スタック

- **言語**: TypeScript (HTML/CSS も使用)
- **ストレージ**: JSON 形式で LocalStorage にグループデータを保存
- **対象プラットフォーム**: Chrome 拡張機能
- **開発ツール**: Cursor (VSCode), Claude Code

## 開発フェーズ

### フェーズ 1 (現在の優先事項)

- Google Calendar 統合の完成
- グループ切り替え機能の実装
- グループ作成機能の実装

### フェーズ 2

- 設定ページ機能の完成
- グループ編集機能の実装
- インポート/エクスポート機能の実装

## 重要な技術詳細

### データ保存

- グループは LocalStorage に JSON として保存
- 例の形式: `{"groupName": "My Team", "calendars": ["user1", "user2"]}`

### Google Calendar 統合

- コンテキストメニュー（右クリック）統合を使用
- `aria-label="他のカレンダー"`セクションを対象
- `aria-label={$グループに保存されたユーザー名}`のチェックボックスを操作

### UI コンポーネント

- Google Calendar 内のコンテキストメニュー統合
- グループ管理を含む設定ページ
- グループ作成とインポート/エクスポート用のダイアログボックス

## テスト要件

- 単体テストと統合テストが必要
- t-wada テスト手法に従う
- カレンダー操作機能を徹底的にテスト

## 開発ノート

- すべてのコードに TypeScript が必要
- Google Calendar のアップデートによって機能が壊れるリスクを認識
- git コミットとバージョン管理を優先
- デフォルト動作: グループカレンダーを有効にし、その他を無効にする（設定可能）

## 重要な考慮事項

- 拡張機能は Google Calendar の DOM 構造変更に対応する必要
- データ永続化のための LocalStorage の制限
- ユーザーエクスペリエンスは直感的で高速である必要
- DOM 操作のセキュリティ考慮事項

実装中、要件について曖昧なところがあった場合作業を中断しユーザーに確認すること！
